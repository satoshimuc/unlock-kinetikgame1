<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Bouquet</title>
    <!-- LIFF SDKã®èª­ã¿è¾¼ã¿ (å¿…é ˆè¦ä»¶1) -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    
    <!-- Google Fonts: èª­ã¿ã‚„ã™ã•ã¨é«˜ç´šæ„Ÿã‚’æ¼”å‡º -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* å†™çœŸã‹ã‚‰æŠ½å‡ºã—ãŸã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ */
            --primary-pink: #F4C4C4; /* ãƒ©ãƒƒãƒ”ãƒ³ã‚°ã®ãƒ”ãƒ³ã‚¯ */
            --deep-pink: #E08A8A;
            --leaf-green: #A8C686; /* ã‚¹ã‚ºãƒ©ãƒ³ã®è‘‰ã®è‰² */
            --text-color: #5A4A4A;
            --bg-color: #FDFBF7;
            --white: #FFFFFF;
            --accent-gold: #D4AF37;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            width: 100%;
            padding: 20px;
            text-align: center;
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        h1 {
            font-family: 'Zen Maru Gothic', sans-serif;
            color: var(--text-color);
            font-size: 1.5rem;
            letter-spacing: 0.05em;
        }

        h1 span {
            color: var(--deep-pink);
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
        .container {
            width: 100%;
            max-width: 480px; /* ã‚¹ãƒãƒ›æœ€é©ãªå¹… */
            padding: 24px;
            flex: 1;
        }

        /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¨ãƒªã‚¢ */
        .hero {
            text-align: center;
            margin-bottom: 32px;
        }

        .hero p {
            font-size: 0.9rem;
            color: #888;
            margin-top: 8px;
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95rem;
            color: var(--text-color);
        }

        input[type="text"],
        select,
        textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 12px;
            font-size: 1rem;
            background-color: var(--white);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--leaf-green);
            box-shadow: 0 0 0 3px rgba(168, 198, 134, 0.2);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* é€ä¿¡ãƒœã‚¿ãƒ³ */
        .btn-submit {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-pink), var(--deep-pink));
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(224, 138, 138, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 10px;
        }

        .btn-submit:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(224, 138, 138, 0.4);
        }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆã‚«ãƒ¼ãƒ‰é¢¨ï¼‰ */
        #result-area {
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
            margin-top: 40px;
            animation: fadeIn 0.8s ease;
        }

        .gift-card {
            background: var(--white);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            text-align: center;
            position: relative;
            border: 1px solid #eee;
            overflow: hidden;
        }

        /* ãƒ”ãƒ³ã‚¯ã®ã‚¯ãƒ¬ãƒ¼ãƒ—ç´™é¢¨è£…é£¾ */
        .gift-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: repeating-linear-gradient(
                45deg,
                var(--primary-pink),
                var(--primary-pink) 10px,
                #fff 10px,
                #fff 20px
            );
        }

        .flower-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        .card-title {
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1.2rem;
            color: var(--leaf-green);
            margin-bottom: 24px;
        }

        .message-box {
            background-color: #fff;
            border: 1px dashed var(--primary-pink);
            padding: 20px;
            border-radius: 8px;
            font-family: 'Zen Maru Gothic', sans-serif; /* æ‰‹æ›¸ãé¢¨ãƒ•ã‚©ãƒ³ãƒˆ */
            text-align: left;
            margin-bottom: 20px;
            position: relative;
        }

        .message-content {
            white-space: pre-wrap;
            font-size: 1rem;
            color: #333;
        }

        .message-from {
            text-align: right;
            margin-top: 10px;
            font-size: 0.85rem;
            color: #888;
        }

        .share-btn {
            background-color: #06C755; /* LINE Green */
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 24px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>

    <header>
        <h1>Book <span>Bouquet</span></h1>
    </header>

    <div class="container">
        <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚¨ãƒªã‚¢ -->
        <div id="input-area">
            <div class="hero">
                <p>çµµæœ¬ã¨ãŠèŠ±ã‚’ã€ãƒ–ãƒ¼ã‚±ã®ã‚ˆã†ã«ã€‚<br>å¤§åˆ‡ãªäººã¸ç‰©èªã‚’è´ˆã‚Šã¾ã—ã‚‡ã†ã€‚</p>
            </div>

            <form id="bouquet-form">
                <div class="form-group">
                    <label for="book-select">çµµæœ¬ã‚’é¸ã¶</label>
                    <select id="book-select" required>
                        <option value="" disabled selected>é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="Life - ãƒ©ã‚¤ãƒ•">Life - ãƒ©ã‚¤ãƒ• (ãã™ã®ãã—ã’ã®ã‚Š)</option>
                        <option value="100ä¸‡å›ç”ŸããŸã­ã“">100ä¸‡å›ç”ŸããŸã­ã“</option>
                        <option value="æ˜Ÿã®ç‹å­ã•ã¾">æ˜Ÿã®ç‹å­ã•ã¾</option>
                        <option value="ã¯ã‚‰ãºã“ã‚ãŠã‚€ã—">ã¯ã‚‰ãºã“ã‚ãŠã‚€ã—</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="flower-select">ãŠèŠ±ï¼ˆæ ï¼‰ã‚’é¸ã¶</label>
                    <select id="flower-select" required>
                        <option value="lily">ã‚¹ã‚ºãƒ©ãƒ³ (ç´”ç²‹ãƒ»å¹¸ç¦ã®å†æ¥)</option>
                        <option value="mimosa">ãƒŸãƒ¢ã‚¶ (æ„Ÿè¬ãƒ»å‹æƒ…)</option>
                        <option value="rose">ãƒ”ãƒ³ã‚¯ãƒ­ãƒ¼ã‚º (ä¸Šå“ãƒ»æ„›ã®èª“ã„)</option>
                        <option value="lavender">ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼ (æœŸå¾…ãƒ»æ²ˆé»™)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="recipient">è´ˆã‚Šç›¸æ‰‹ã®ãŠåå‰</label>
                    <input type="text" id="recipient" placeholder="ä¾‹ï¼šãŠæ¯ã•ã‚“ã€èŠ±å­ã•ã‚“" required>
                </div>

                <div class="form-group">
                    <label for="message">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label>
                    <textarea id="message" placeholder="ãƒ–ãƒ¼ã‚±ã«æ·»ãˆã‚‹è¨€è‘‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...&#10;ä¾‹ï¼šãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼ã„ã¤ã¾ã§ã‚‚å…ƒæ°—ã§ã„ã¦ã­ã€‚" required></textarea>
                </div>

                <button type="submit" class="btn-submit">ãƒ–ãƒ¼ã‚±ã‚’ä½œæˆã™ã‚‹</button>
            </form>
        </div>

        <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
        <div id="loading" class="loading">
            <p>å¿ƒã‚’è¾¼ã‚ã¦åŒ…ã‚“ã§ã„ã¾ã™...</p>
        </div>

        <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="result-area">
            <div class="gift-card">
                <div id="flower-display" class="flower-icon">ğŸŒ¿</div>
                <h2 class="card-title">Book Bouquet Gift</h2>
                
                <p style="margin-bottom: 10px; font-size: 0.9rem;">
                    <span id="result-book" style="font-weight:bold;"></span> ã‚’<br>
                    ãŠå±Šã‘ã—ã¾ã—ãŸã€‚
                </p>

                <div class="message-box">
                    <div id="result-recipient" style="font-size: 0.9rem; margin-bottom: 5px; font-weight: bold;"></div>
                    <div id="result-message" class="message-content"></div>
                    <div class="message-from">From ã‚ãªãŸ</div>
                </div>

                <button class="share-btn" onclick="shareLine()">
                    LINEã§ã‚·ã‚§ã‚¢ã™ã‚‹
                </button>
                
                <p style="margin-top:20px; font-size:0.8rem; color:#aaa; cursor:pointer;" onclick="resetForm()">
                    ã‚‚ã†ä¸€åº¦ã¤ãã‚‹
                </p>
            </div>
        </div>
    </div>

    <script>
        // DOMè¦ç´ ã®å–å¾—
        const form = document.getElementById('bouquet-form');
        const inputArea = document.getElementById('input-area');
        const resultArea = document.getElementById('result-area');
        const loading = document.getElementById('loading');

        // èŠ±ã®ã‚¢ã‚¤ã‚³ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°
        const flowerIcons = {
            'lily': 'ğŸŒ¿', // ã‚¹ã‚ºãƒ©ãƒ³ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆçµµæ–‡å­—ã§ä»£ç”¨ï¼‰
            'mimosa': 'ğŸŒ¼',
            'rose': 'ğŸŒ¹',
            'lavender': 'ğŸª»'
        };
        
        // LIFFåˆæœŸåŒ–çŠ¶æ…‹ãƒ•ãƒ©ã‚°
        let isLiffInitialized = false;

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç† (å¿…é ˆè¦ä»¶4)
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // å…¥åŠ›å€¤ã®å–å¾—
            const book = document.getElementById('book-select').value;
            const flower = document.getElementById('flower-select').value;
            const recipient = document.getElementById('recipient').value;
            const message = document.getElementById('message').value;

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ¼”å‡º
            inputArea.style.display = 'none';
            loading.style.display = 'block';

            setTimeout(() => {
                loading.style.display = 'none';
                showResult(book, flower, recipient, message);
            }, 1000); // 1ç§’å¾…æ©Ÿ
        });

        // çµæœã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function showResult(book, flower, recipient, message) {
            document.getElementById('result-book').textContent = book;
            document.getElementById('flower-display').textContent = flowerIcons[flower] || 'ğŸ’';
            document.getElementById('result-recipient').textContent = `To: ${recipient}`;
            document.getElementById('result-message').textContent = message;

            resultArea.style.display = 'block';
        }

        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹é–¢æ•°
        function resetForm() {
            resultArea.style.display = 'none';
            inputArea.style.display = 'block';
            form.reset();
        }

        // LINEã§ã‚·ã‚§ã‚¢ï¼ˆãƒ€ãƒŸãƒ¼é–¢æ•°ï¼šå®Ÿéš›ã®LIFFé€£æºæ™‚ã¯liff.sendMessageç­‰ã‚’ä½¿ã†ï¼‰
        function shareLine() {
            // LIFFãŒåˆæœŸåŒ–ã•ã‚Œã€ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã®ã¿å®Ÿéš›ã«é€ä¿¡
            if (isLiffInitialized && liff.isLoggedIn()) {
                liff.sendMessages([{
                    type: 'text',
                    text: 'Book Bouquetã‚’é€ã‚Šã¾ã—ãŸï¼'
                }]).then(() => {
                    alert('LINEã«é€ä¿¡ã—ã¾ã—ãŸ');
                    liff.closeWindow(); // é€ä¿¡å¾Œã«é–‰ã˜ã‚‹
                }).catch((err) => {
                    console.log('error', err);
                    alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + err.message);
                });
            } else {
                 // ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                 alert('ã€é€ä¿¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‘\nç´ æ•µãªãƒ–ãƒ¼ã‚±ãŒã§ãã¾ã—ãŸã­ï¼\n\nâ€»ç¾åœ¨ã¯ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚ã€å®Ÿéš›ã®LINEé€ä¿¡ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚\nâ€»LIFF IDã‚’è¨­å®šã™ã‚‹ã¨å®Ÿéš›ã®LINEé€£æºãŒå‹•ä½œã—ã¾ã™ã€‚');
            }
        }

        // å¿…é ˆè¦ä»¶2: LIFFã®åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰
        // bodyã‚¿ã‚°ã®æœ€å¾Œã®æ–¹ã«é…ç½®
        document.addEventListener('DOMContentLoaded', function() {
            const myLiffId = "2008614777-Z7PXQRbA"; // ã“ã“ã‚’å®Ÿéš›ã®LIFF IDã«æ›¸ãæ›ãˆã¦ãã ã•ã„

            // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã¾ã¾ã®å ´åˆã¯åˆæœŸåŒ–ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’é˜²ã
            if (myLiffId === "LIFF_ID_PLACEHOLDER") {
                console.log("LIFF IDãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã—ã¾ã™ã€‚(LIFFé€£æºæ©Ÿèƒ½ã¯å‹•ä½œã—ã¾ã›ã‚“)");
                return;
            }

            liff.init({ liffId: myLiffId })
                .then(() => {
                    console.log("LIFF initialization succeeded");
                    isLiffInitialized = true;
                    // LIFFã‚¢ãƒ—ãƒªã¨ã—ã¦é–‹ã‹ã‚Œã¦ã„ã‚‹å ´åˆã®å‡¦ç†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ãªã©ï¼‰ã‚’ã“ã“ã«è¨˜è¿°ã§ãã¾ã™
                })
                .catch((err) => {
                    console.error("LIFF initialization failed", err);
                    // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆé€šå¸¸ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã‹ã‚ŒãŸå ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã©ï¼‰
                });
        });
    </script>
</body>
</html>
