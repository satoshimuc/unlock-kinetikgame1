<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Bouquet</title>
    <!-- LIFF SDKã®èª­ã¿è¾¼ã¿ (å¿…é ˆè¦ä»¶1) -->
    <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    
    <!-- Google Fonts: èª­ã¿ã‚„ã™ã•ã¨é«˜ç´šæ„Ÿã‚’æ¼”å‡º -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            /* å†™çœŸã‹ã‚‰æŠ½å‡ºã—ãŸã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ (ç·‘ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«å¤‰æ›´) */
            --primary-color: #CDE8D3; /* ãƒ¡ã‚¤ãƒ³ï¼šæ·¡ã„è‹¥è‰è‰² */
            --deep-color: #68B07D;    /* å¼·èª¿ï¼šè½ã¡ç€ã„ãŸç·‘ */
            --leaf-green: #558B6E;    /* ãƒ†ã‚­ã‚¹ãƒˆç”¨ãªã©ã®æ¿ƒã„ç·‘ */
            --text-color: #4A5A50;    /* å°‘ã—ç·‘ãŒã‹ã£ãŸãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼ */
            --bg-color: #F8FBF8;      /* ã»ã‚“ã®ã‚Šç·‘ãŒã‹ã£ãŸç™½ */
            --white: #FFFFFF;
            --accent-gold: #D4AF37;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            width: 100%;
            padding: 20px;
            text-align: center;
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        h1 {
            font-family: 'Zen Maru Gothic', sans-serif;
            color: var(--text-color);
            font-size: 1.5rem;
            letter-spacing: 0.05em;
        }

        h1 span {
            color: var(--deep-color);
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
        .container {
            width: 100%;
            max-width: 480px; /* ã‚¹ãƒãƒ›æœ€é©ãªå¹… */
            padding: 24px;
            flex: 1;
        }

        /* --- LPã‚¨ãƒªã‚¢ã®ãƒ‡ã‚¶ã‚¤ãƒ³ --- */
        #lp-area {
            text-align: center;
            animation: fadeIn 0.8s ease;
        }

        .lp-hero {
            margin-bottom: 40px;
            padding: 40px 0;
            /* ç·‘ç³»ã®å„ªã—ã„ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤‰æ›´ */
            background: radial-gradient(circle, #E6F5E9 0%, transparent 70%);
        }

        .lp-title {
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1.8rem;
            margin-bottom: 16px;
            color: var(--deep-color);
            line-height: 1.4;
        }

        .lp-subtitle {
            font-size: 1rem;
            color: #888;
            margin-bottom: 30px;
        }

        .lp-image-placeholder {
            width: 100%;
            height: 200px;
            background-color: #fff;
            border-radius: 16px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            border: 2px dashed var(--primary-color);
            color: var(--primary-color);
            position: relative;
            overflow: hidden;
        }
        
        /* ç°¡æ˜“çš„ãªãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«è£…é£¾ */
        .lp-image-placeholder::after {
            content: 'ğŸ’';
            font-size: 5rem;
            position: absolute;
            opacity: 0.8;
            animation: float 4s ease-in-out infinite;
        }

        .lp-section {
            margin-bottom: 40px;
            text-align: left;
            padding: 20px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.02);
        }

        .lp-section h3 {
            font-family: 'Zen Maru Gothic', sans-serif;
            color: var(--leaf-green);
            font-size: 1.2rem;
            margin-bottom: 12px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 5px;
            display: inline-block;
        }

        .lp-section p {
            font-size: 0.95rem;
            color: #666;
            margin-bottom: 15px;
        }

        /* ã‚¢ãƒ—ãƒªé–‹å§‹ãƒœã‚¿ãƒ³ï¼ˆCTAï¼‰ */
        .btn-start {
            width: 100%;
            padding: 18px;
            /* ç·‘ç³»ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤‰æ›´ */
            background: linear-gradient(135deg, var(--deep-color), #8AC69B);
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(104, 176, 125, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-start::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(255,255,255,0.2), transparent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(104, 176, 125, 0.5);
        }

        .btn-start:hover::after {
            opacity: 1;
        }

        /* --- ã“ã“ã¾ã§LPç”¨ãƒ‡ã‚¶ã‚¤ãƒ³ --- */

        /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚¨ãƒªã‚¢ï¼ˆã‚¢ãƒ—ãƒªå†…ï¼‰ */
        .hero {
            text-align: center;
            margin-bottom: 32px;
        }

        .hero p {
            font-size: 0.9rem;
            color: #888;
            margin-top: 8px;
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 0.95rem;
            color: var(--text-color);
        }

        input[type="text"],
        select,
        textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 12px;
            font-size: 1rem;
            background-color: var(--white);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--deep-color);
            box-shadow: 0 0 0 3px rgba(104, 176, 125, 0.2);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* é€ä¿¡ãƒœã‚¿ãƒ³ */
        .btn-submit {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-color), var(--deep-color));
            color: var(--white);
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(104, 176, 125, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1); /* æ–‡å­—ã‚’è¦‹ã‚„ã™ã */
            margin-top: 10px;
        }

        .btn-submit:active {
            transform: scale(0.98);
            box-shadow: 0 2px 8px rgba(104, 176, 125, 0.4);
        }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆã‚«ãƒ¼ãƒ‰é¢¨ï¼‰ */
        #result-area {
            display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
            margin-top: 40px;
            animation: fadeIn 0.8s ease;
        }

        .gift-card {
            background: var(--white);
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            text-align: center;
            position: relative;
            border: 1px solid #eee;
            overflow: hidden;
        }

        /* ç·‘ã®ãƒ©ãƒƒãƒ”ãƒ³ã‚°é¢¨è£…é£¾ */
        .gift-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: repeating-linear-gradient(
                45deg,
                var(--primary-color),
                var(--primary-color) 10px,
                #fff 10px,
                #fff 20px
            );
        }

        .flower-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        .card-title {
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1.2rem;
            color: var(--leaf-green);
            margin-bottom: 24px;
        }

        .message-box {
            background-color: #fff;
            border: 1px dashed var(--primary-color);
            padding: 20px;
            border-radius: 8px;
            font-family: 'Zen Maru Gothic', sans-serif; /* æ‰‹æ›¸ãé¢¨ãƒ•ã‚©ãƒ³ãƒˆ */
            text-align: left;
            margin-bottom: 20px;
            position: relative;
        }

        .message-content {
            white-space: pre-wrap;
            font-size: 1rem;
            color: #333;
        }

        .message-from {
            text-align: right;
            margin-top: 10px;
            font-size: 0.85rem;
            color: #888;
        }

        .share-btn {
            background-color: #06C755; /* LINE Green */
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 24px;
            font-weight: bold;
            font-size: 0.9rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        .loading {
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>

    <header>
        <h1 style="cursor: pointer;" onclick="goHome()">Book <span>Bouquet</span></h1>
    </header>

    <div class="container">

        <!-- LP (ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸) ã‚¨ãƒªã‚¢ -->
        <div id="lp-area">
            <div class="lp-hero">
                <div class="lp-image-placeholder"></div>
                <h2 class="lp-title">çµµæœ¬ã¨ãŠèŠ±ã‚’ã€<br>ãƒ–ãƒ¼ã‚±ã®ã‚ˆã†ã«ã€‚</h2>
                <p class="lp-subtitle">è¨€è‘‰ã®èŠ±æŸã‚’ã€å¤§åˆ‡ãªã‚ã®äººã¸è´ˆã‚Šã¾ã›ã‚“ã‹ï¼Ÿ</p>
                <button class="btn-start" onclick="startApp()">ãƒ–ãƒ¼ã‚±ã‚’ã¤ãã‚‹</button>
            </div>

            <div class="lp-section">
                <h3>Book Bouquetã¨ã¯ï¼Ÿ</h3>
                <p>
                    ã€ŒBook Bouquetã€ã¯ã€å¿ƒæ¸©ã¾ã‚‹çµµæœ¬ã¨ã€èŠ±è¨€è‘‰ã‚’æ·»ãˆãŸæ ï¼ˆã—ãŠã‚Šï¼‰ã‚’ã‚»ãƒƒãƒˆã«ã—ã¦è´ˆã‚‹ã€æ–°ã—ã„ã‚®ãƒ•ãƒˆã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚
                </p>
                <p>
                    ã¾ã‚‹ã§èŠ±æŸã‚’å—ã‘å–ã£ãŸã¨ãã®ã‚ˆã†ãªæ„Ÿå‹•ã¨ã€ç‰©èªã®ä¸–ç•Œã«æµ¸ã‚‹å„ªã—ã„æ™‚é–“ã‚’ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã—ã¾ã™ã€‚
                </p>
            </div>

            <div class="lp-section">
                <h3>ã‚®ãƒ•ãƒˆã®å†…å®¹</h3>
                <p>
                    ğŸŒ¿ <b>é¸ã¹ã‚‹çµµæœ¬</b><br>
                    è´ˆã‚‹ç›¸æ‰‹ã«åˆã‚ã›ã¦ã€å³é¸ã•ã‚ŒãŸåä½œçµµæœ¬ã‹ã‚‰ä¸€å†Šã‚’ãŠé¸ã³ã„ãŸã ã‘ã¾ã™ã€‚
                </p>
                <p>
                    ğŸŒ· <b>èŠ±ã®æ </b><br>
                    ã€Œã‚¹ã‚ºãƒ©ãƒ³ã€ã‚„ã€ŒãƒŸãƒ¢ã‚¶ã€ãªã©ã€ä¼ãˆãŸã„æƒ³ã„ã«åˆã‚ã›ãŸèŠ±è¨€è‘‰ã‚’æŒã¤é€æ˜ãªæ ã‚’æ·»ãˆã¾ã™ã€‚
                </p>
                <p>
                    ğŸ <b>ç‰¹åˆ¥ãªãƒ©ãƒƒãƒ”ãƒ³ã‚°</b><br>
                    ãƒŠãƒãƒ¥ãƒ©ãƒ«ãªã‚°ãƒªãƒ¼ãƒ³ã®åŒ…ã¿ç´™ã§å„ªã—ãåŒ…ã¿ã€éº»ç´ã§çµã‚“ã ãƒ–ãƒ¼ã‚±ã®ã‚ˆã†ãªãƒ©ãƒƒãƒ”ãƒ³ã‚°ã§ãŠå±Šã‘ã—ã¾ã™ã€‚
                </p>
            </div>

            <div style="text-align: center; margin-bottom: 40px;">
                <p style="margin-bottom: 16px; font-size: 0.9rem;">ã•ã‚ã€ã‚ãªãŸã®æƒ³ã„ã‚’å½¢ã«ã—ã¾ã—ã‚‡ã†ã€‚</p>
                <button class="btn-start" onclick="startApp()">ä»Šã™ãè´ˆã‚‹</button>
            </div>
        </div>


        <!-- ã‚¢ãƒ—ãƒªå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚¨ãƒªã‚¢ (åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º) -->
        <div id="input-area" style="display: none;">
            <div class="hero">
                <p>çµµæœ¬ã¨ãŠèŠ±ã‚’é¸ã‚“ã§ã€<br>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
            </div>

            <form id="bouquet-form">
                <div class="form-group">
                    <label for="book-select">çµµæœ¬ã‚’é¸ã¶</label>
                    <select id="book-select" required>
                        <option value="" disabled selected>é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="Life - ãƒ©ã‚¤ãƒ•">Life - ãƒ©ã‚¤ãƒ• (ãã™ã®ãã—ã’ã®ã‚Š)</option>
                        <option value="100ä¸‡å›ç”ŸããŸã­ã“">100ä¸‡å›ç”ŸããŸã­ã“</option>
                        <option value="æ˜Ÿã®ç‹å­ã•ã¾">æ˜Ÿã®ç‹å­ã•ã¾</option>
                        <option value="ã¯ã‚‰ãºã“ã‚ãŠã‚€ã—">ã¯ã‚‰ãºã“ã‚ãŠã‚€ã—</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="flower-select">ãŠèŠ±ï¼ˆæ ï¼‰ã‚’é¸ã¶</label>
                    <select id="flower-select" required>
                        <option value="lily">ã‚¹ã‚ºãƒ©ãƒ³ (ç´”ç²‹ãƒ»å¹¸ç¦ã®å†æ¥)</option>
                        <option value="mimosa">ãƒŸãƒ¢ã‚¶ (æ„Ÿè¬ãƒ»å‹æƒ…)</option>
                        <option value="rose">ãƒ”ãƒ³ã‚¯ãƒ­ãƒ¼ã‚º (ä¸Šå“ãƒ»æ„›ã®èª“ã„)</option>
                        <option value="lavender">ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼ (æœŸå¾…ãƒ»æ²ˆé»™)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="recipient">è´ˆã‚Šç›¸æ‰‹ã®ãŠåå‰</label>
                    <input type="text" id="recipient" placeholder="ä¾‹ï¼šãŠæ¯ã•ã‚“ã€èŠ±å­ã•ã‚“" required>
                </div>

                <div class="form-group">
                    <label for="message">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label>
                    <textarea id="message" placeholder="ãƒ–ãƒ¼ã‚±ã«æ·»ãˆã‚‹è¨€è‘‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„...&#10;ä¾‹ï¼šãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼ã„ã¤ã¾ã§ã‚‚å…ƒæ°—ã§ã„ã¦ã­ã€‚" required></textarea>
                </div>

                <button type="submit" class="btn-submit">ãƒ–ãƒ¼ã‚±ã‚’ä½œæˆã™ã‚‹</button>
                <p style="text-align:center; margin-top:15px; font-size:0.9rem; color:#888; cursor:pointer; text-decoration: underline;" onclick="goHome()">ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</p>
            </form>
        </div>

        <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
        <div id="loading" class="loading">
            <p>å¿ƒã‚’è¾¼ã‚ã¦åŒ…ã‚“ã§ã„ã¾ã™...</p>
        </div>

        <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="result-area">
            <div class="gift-card">
                <div id="flower-display" class="flower-icon">ğŸŒ¿</div>
                <h2 class="card-title">Book Bouquet Gift</h2>
                
                <p style="margin-bottom: 10px; font-size: 0.9rem;">
                    <span id="result-book" style="font-weight:bold;"></span> ã‚’<br>
                    ãŠå±Šã‘ã—ã¾ã—ãŸã€‚
                </p>

                <div class="message-box">
                    <div id="result-recipient" style="font-size: 0.9rem; margin-bottom: 5px; font-weight: bold;"></div>
                    <div id="result-message" class="message-content"></div>
                    <div class="message-from">From ã‚ãªãŸ</div>
                </div>

                <button class="share-btn" onclick="shareLine()">
                    LINEã§ã‚·ã‚§ã‚¢ã™ã‚‹
                </button>
                
                <p style="margin-top:20px; font-size:0.8rem; color:#aaa; cursor:pointer;" onclick="resetForm()">
                    ã‚‚ã†ä¸€åº¦ã¤ãã‚‹
                </p>
                <p style="margin-top:10px; font-size:0.8rem; color:#aaa; cursor:pointer;" onclick="goHome()">
                    ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹
                </p>
            </div>
        </div>
    </div>

    <script>
        // DOMè¦ç´ ã®å–å¾—
        const lpArea = document.getElementById('lp-area');
        const form = document.getElementById('bouquet-form');
        const inputArea = document.getElementById('input-area');
        const resultArea = document.getElementById('result-area');
        const loading = document.getElementById('loading');

        // èŠ±ã®ã‚¢ã‚¤ã‚³ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°
        const flowerIcons = {
            'lily': 'ğŸŒ¿', // ã‚¹ã‚ºãƒ©ãƒ³ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆçµµæ–‡å­—ã§ä»£ç”¨ï¼‰
            'mimosa': 'ğŸŒ¼',
            'rose': 'ğŸŒ¹',
            'lavender': 'ğŸª»'
        };
        
        // LIFFåˆæœŸåŒ–çŠ¶æ…‹ãƒ•ãƒ©ã‚°
        let isLiffInitialized = false;

        // --- ç”»é¢é·ç§»é–¢æ•° ---

        // LPã‹ã‚‰ã‚¢ãƒ—ãƒªé–‹å§‹
        function startApp() {
            lpArea.style.display = 'none';
            inputArea.style.display = 'block';
            window.scrollTo(0, 0); // ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã¸
        }

        // ãƒ›ãƒ¼ãƒ ï¼ˆLPï¼‰ã«æˆ»ã‚‹
        function goHome() {
            resultArea.style.display = 'none';
            inputArea.style.display = 'none';
            lpArea.style.display = 'block';
            form.reset();
            window.scrollTo(0, 0);
        }

        // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç† (å¿…é ˆè¦ä»¶4)
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // å…¥åŠ›å€¤ã®å–å¾—
            const book = document.getElementById('book-select').value;
            const flower = document.getElementById('flower-select').value;
            const recipient = document.getElementById('recipient').value;
            const message = document.getElementById('message').value;

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ¼”å‡º
            inputArea.style.display = 'none';
            loading.style.display = 'block';

            setTimeout(() => {
                loading.style.display = 'none';
                showResult(book, flower, recipient, message);
            }, 1000); // 1ç§’å¾…æ©Ÿ
        });

        // çµæœã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
        function showResult(book, flower, recipient, message) {
            document.getElementById('result-book').textContent = book;
            document.getElementById('flower-display').textContent = flowerIcons[flower] || 'ğŸ’';
            document.getElementById('result-recipient').textContent = `To: ${recipient}`;
            document.getElementById('result-message').textContent = message;

            resultArea.style.display = 'block';
        }

        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹é–¢æ•°
        function resetForm() {
            resultArea.style.display = 'none';
            inputArea.style.display = 'block';
            form.reset();
        }

        // LINEã§ã‚·ã‚§ã‚¢ï¼ˆãƒ€ãƒŸãƒ¼é–¢æ•°ï¼šå®Ÿéš›ã®LIFFé€£æºæ™‚ã¯liff.sendMessageç­‰ã‚’ä½¿ã†ï¼‰
        function shareLine() {
            // LIFFãŒåˆæœŸåŒ–ã•ã‚Œã€ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ã®å ´åˆã®ã¿å®Ÿéš›ã«é€ä¿¡
            if (isLiffInitialized && liff.isLoggedIn()) {
                liff.sendMessages([{
                    type: 'text',
                    text: 'Book Bouquetã‚’é€ã‚Šã¾ã—ãŸï¼'
                }]).then(() => {
                    alert('LINEã«é€ä¿¡ã—ã¾ã—ãŸ');
                    liff.closeWindow(); // é€ä¿¡å¾Œã«é–‰ã˜ã‚‹
                }).catch((err) => {
                    console.log('error', err);
                    alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + err.message);
                });
            } else {
                 // ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã¾ãŸã¯ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
                 alert('ã€é€ä¿¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‘\nç´ æ•µãªãƒ–ãƒ¼ã‚±ãŒã§ãã¾ã—ãŸã­ï¼\n\nâ€»ç¾åœ¨ã¯ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã®ãŸã‚ã€å®Ÿéš›ã®LINEé€ä¿¡ã¯è¡Œã‚ã‚Œã¾ã›ã‚“ã€‚\nâ€»LIFF IDã‚’è¨­å®šã™ã‚‹ã¨å®Ÿéš›ã®LINEé€£æºãŒå‹•ä½œã—ã¾ã™ã€‚');
            }
        }

        // å¿…é ˆè¦ä»¶2: LIFFã®åˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰
        // bodyã‚¿ã‚°ã®æœ€å¾Œã®æ–¹ã«é…ç½®
        document.addEventListener('DOMContentLoaded', function() {
            const myLiffId = "2008614777-Z7PXQRbA"; // ã“ã“ã‚’å®Ÿéš›ã®LIFF IDã«æ›¸ãæ›ãˆã¦ãã ã•ã„

            // ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã¾ã¾ã®å ´åˆã¯åˆæœŸåŒ–ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’é˜²ã
            if (myLiffId === "LIFF_ID_PLACEHOLDER") {
                console.log("LIFF IDãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã—ã¾ã™ã€‚(LIFFé€£æºæ©Ÿèƒ½ã¯å‹•ä½œã—ã¾ã›ã‚“)");
                return;
            }

            liff.init({ liffId: myLiffId })
                .then(() => {
                    console.log("LIFF initialization succeeded");
                    isLiffInitialized = true;
                    // LIFFã‚¢ãƒ—ãƒªã¨ã—ã¦é–‹ã‹ã‚Œã¦ã„ã‚‹å ´åˆã®å‡¦ç†ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ãªã©ï¼‰ã‚’ã“ã“ã«è¨˜è¿°ã§ãã¾ã™
                })
                .catch((err) => {
                    console.error("LIFF initialization failed", err);
                    // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆé€šå¸¸ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã‹ã‚ŒãŸå ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãªã©ï¼‰
                });
        });
    </script>
</body>
</html>
